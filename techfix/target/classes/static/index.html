<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TechFix · Painel Inteligente</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar__container">
        <h1 class="navbar__logo">TechFix</h1>
        <div class="navbar__links">
          <button class="nav-link active" data-page="home">Menu Principal</button>
          <button class="nav-link" data-page="tickets">Chamados</button>
          <button class="nav-link" data-page="customers">Clientes</button>
          <button class="nav-link" data-page="inventory">Estoque</button>
          <button class="nav-link" data-page="laudo">Laudos</button>
        </div>
      </div>
    </nav>

    <!-- Página: Menu Principal -->
    <div id="page-home" class="page active">
      <header class="hero">
        <div class="hero__content">
          <p class="hero__eyebrow">Assistência técnica de linha branca</p>
          <h1>Controle todo o fluxo de reparos em um só lugar</h1>
          <p>
            O painel TechFix combina indicadores em tempo real com uma agenda
            simplificada para facilitar decisões rápidas com sua equipe técnica especializada em geladeiras, televisores, máquinas de lavar e outros eletrodomésticos.
          </p>
        </div>
        <div class="hero__quick-stats">
          <div class="quick-card">
            <span class="label">Chamados hoje</span>
            <strong id="metric-today">0</strong>
          </div>
          <div class="quick-card">
            <span class="label">Técnicos disponíveis</span>
            <strong id="metric-techs">0</strong>
          </div>
        </div>
      </header>

      <main class="grid">
        <section class="card" aria-labelledby="pipeline-title">
          <header class="card__header">
            <h2 id="pipeline-title">Pipeline de chamados</h2>
            <span class="pill pill--info" id="pipeline-pill">carregando…</span>
          </header>
          <div id="ticket-pipeline" class="pipeline">
            <p class="placeholder">Sem dados carregados ainda.</p>
          </div>
        </section>
      </main>
    </div>

    <!-- Página: Chamados -->
    <div id="page-tickets" class="page">
      <div class="page-header">
        <h2>Gerenciar Chamados</h2>
      </div>
      <main class="grid">
        <section class="card card--full">
          <header class="card__header">
            <h2>Novo Chamado</h2>
            <button type="button" class="btn btn--secondary" id="goto-customers-btn">Cadastrar Cliente</button>
          </header>
          <form id="ticket-form" class="form">
            <label class="form__field">
              <span>Cliente (ID, Nome ou CPF)</span>
              <input id="customer-search" name="customerSearch" type="text" placeholder="Digite o ID, nome ou CPF do cliente" required />
              <div id="customer-results" class="customer-results"></div>
            </label>
            <div id="selected-customer" class="selected-customer" style="display: none;">
              <strong>Cliente selecionado:</strong>
              <span id="selected-customer-info"></span>
              <button type="button" id="clear-customer" class="btn btn--secondary">Trocar cliente</button>
            </div>
            <label class="form__field">
              <span>Tipo de Equipamento</span>
              <select name="deviceType" required>
                <option value="">Selecione o tipo</option>
                <option value="Geladeira">Geladeira</option>
                <option value="Televisão">Televisão</option>
                <option value="Máquina de Lavar">Máquina de Lavar</option>
                <option value="Micro-ondas">Micro-ondas</option>
                <option value="Fogão">Fogão</option>
                <option value="Lava-louças">Lava-louças</option>
                <option value="Ar Condicionado">Ar Condicionado</option>
                <option value="Outro">Outro</option>
              </select>
            </label>
            <label class="form__field">
              <span>Marca/Modelo</span>
              <input name="device" type="text" placeholder="Ex.: Brastemp BWA12AB" required />
            </label>
            <label class="form__field">
              <span>Descrição do Problema</span>
              <textarea name="description" rows="3" placeholder="Ex.: Não está gelando / Tela não liga / Não centrifuga" required></textarea>
            </label>
            <button class="btn btn--primary" type="submit">Registrar chamado</button>
          </form>
        </section>
        <section class="card card--full">
          <header class="card__header">
            <h2>Chamados em Andamento</h2>
          </header>
          <div id="tickets-list" class="tickets-list">
            <p class="placeholder">Carregando chamados...</p>
          </div>
        </section>
      </main>
    </div>

    <!-- Página: Clientes -->
    <div id="page-customers" class="page">
      <div class="page-header">
        <h2>Cadastro de Clientes</h2>
      </div>
      <main class="grid">
        <section class="card">
          <header class="card__header">
            <h2>Novo Cliente</h2>
          </header>
          <form id="customer-form" class="form">
            <label class="form__field">
              <span>Nome Completo</span>
              <input name="name" type="text" placeholder="Ex.: Maria Silva" required />
            </label>
            <label class="form__field">
              <span>CPF</span>
              <input name="cpf" type="text" placeholder="000.000.000-00" required pattern="[0-9]{3}\.[0-9]{3}\.[0-9]{3}-[0-9]{2}" />
            </label>
            <label class="form__field">
              <span>Telefone</span>
              <input name="phone" type="text" placeholder="(00) 00000-0000" required />
            </label>
            <label class="form__field">
              <span>Endereço</span>
              <textarea name="address" rows="3" placeholder="Rua, número, bairro, cidade - CEP" required></textarea>
            </label>
            <button class="btn btn--primary" type="submit">Cadastrar Cliente</button>
          </form>
        </section>
        <section class="card card--full">
          <header class="card__header">
            <h2>Clientes Cadastrados</h2>
          </header>
          <div id="customers-list" class="customers-list">
            <p class="placeholder">Carregando clientes...</p>
          </div>
        </section>
      </main>
    </div>

    <!-- Página: Estoque -->
    <div id="page-inventory" class="page">
      <div class="page-header">
        <h2>Gerenciamento de Estoque</h2>
      </div>
      <main class="grid">
        <section class="card">
          <header class="card__header">
            <h2>Registrar Peça</h2>
          </header>
          <form id="inventory-form" class="form">
            <label class="form__field">
              <span>Tipo de Peça</span>
              <input name="type" type="text" placeholder="Ex.: Compressor, Termostato, Resistência" required />
            </label>
            <label class="form__field">
              <span>Marca</span>
              <input name="brand" type="text" placeholder="Ex.: Brastemp, Consul, Electrolux" required />
            </label>
            <label class="form__field">
              <span>Quantidade</span>
              <input name="quantity" type="number" min="1" placeholder="Quantidade" required />
            </label>
            <label class="form__field">
              <span>Preço unitário (R$)</span>
              <input name="price" type="number" min="0" step="0.01" placeholder="Ex.: 199.90" required />
              <small>Esse valor será utilizado nos relatórios e orçamentos.</small>
            </label>
            <button class="btn btn--primary" type="submit">Registrar Peça</button>
          </form>
        </section>
        <section class="card card--full">
          <header class="card__header">
            <h2>Peças em Estoque</h2>
            <button class="btn btn--secondary" type="button" id="inventory-report-btn">Gerar relatório de estoque</button>
          </header>
          <div class="inventory-table-container">
            <table class="inventory-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Tipo</th>
                  <th>Marca</th>
                  <th>Quantidade</th>
                  <th>Preço</th>
                </tr>
              </thead>
              <tbody id="inventory-tbody">
                <tr>
                  <td colspan="5" class="placeholder">Carregando estoque...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <!-- Página: Laudos -->
    <div id="page-laudo" class="page">
      <div class="page-header">
        <h2>Gerar Laudo Técnico</h2>
      </div>
      <main class="grid">
        <section class="card card--full">
          <header class="card__header">
            <h2>Laudo personalizado</h2>
          </header>
          <form id="laudo-form" class="form">
            <label class="form__field">
              <span>Selecione o Chamado</span>
              <select name="ticketId" id="laudo-ticket-id" required>
                <option value="">Carregando chamados...</option>
              </select>
              <small>Selecione um chamado em aberto para gerar o laudo</small>
            </label>
            <label class="form__field">
              <span>Condição do equipamento</span>
              <input name="equipmentCondition" type="text" placeholder="Ex.: Não mantém temperatura / Não liga" required />
            </label>
            <label class="form__field">
              <span>Queixa do cliente</span>
              <textarea name="problemDescription" rows="3" placeholder="Resumo das informações repassadas pelo cliente" required></textarea>
            </label>
            <label class="form__field">
              <span>Diagnóstico técnico</span>
              <textarea name="diagnostic" rows="3" placeholder="Detalhes do diagnóstico realizado" required></textarea>
            </label>
            <label class="form__field">
              <span>Ações executadas</span>
              <textarea name="actionsTaken" rows="3" placeholder="Testes, trocas de peças e ajustes realizados" required></textarea>
            </label>
            <label class="form__field">
              <span>Recomendações finais</span>
              <textarea name="recommendations" rows="3" placeholder="Próximos passos, orientações ou peças adicionais"></textarea>
            </label>
            <label class="form__field">
              <span>Responsável técnico</span>
              <input name="technicianName" id="laudo-technician" type="text" placeholder="Ex.: Henrique A. Sloco" required />
            </label>
            <button class="btn btn--primary" type="submit">Gerar PDF</button>
          </form>
        </section>
      </main>
    </div>

    <footer class="footer">
      <small>© 2025 TechFix Assistência Técnica</small>
    </footer>

    <!-- Modal de orçamento -->
    <div id="budget-modal" class="modal" aria-hidden="true">
      <div class="modal__content">
        <button class="modal__close" id="budget-close" aria-label="Fechar orçamento">&times;</button>
        <h3>Gerar orçamento sem compromisso</h3>
        <form id="budget-form" class="form">
          <input type="hidden" name="ticketId" id="budget-ticket-id" />
          <label class="form__field">
            <span>Diagnóstico</span>
            <textarea name="diagnosis" rows="2" required placeholder="Ex.: Substituir termostato e recalibrar sistema"></textarea>
          </label>
          <label class="form__field">
            <span>Causa provável</span>
            <textarea name="cause" rows="2" required placeholder="Ex.: Termostato não responde às variações de temperatura"></textarea>
          </label>
          <div class="form__two-columns">
            <label class="form__checkbox">
              <input type="checkbox" name="equipmentHasConsent" />
              <span>Equipamento tem conserto?</span>
            </label>
            <label class="form__checkbox">
              <input type="checkbox" name="powerSupplyAffected" />
              <span>Fonte de alimentação afetada?</span>
            </label>
          </div>
          <fieldset class="form__fieldset">
            <legend>Peça principal</legend>
            <label class="form__field">
              <span>Nome da peça</span>
              <input name="partName" type="text" placeholder="Ex.: Termostato para geladeira" />
            </label>
            <label class="form__field">
              <span>Especificação</span>
              <input name="partSpecification" type="text" placeholder="Modelo GH465 compatível" />
            </label>
            <label class="form__field">
              <span>Código interno</span>
              <input name="partCode" type="text" placeholder="Ex.: 45678" />
            </label>
            <label class="form__field">
              <span>Preço da peça (R$)</span>
              <input name="partPrice" type="number" min="0" step="0.01" placeholder="Ex.: 140.00" />
            </label>
            <label class="form__field">
              <span>Mão-de-obra aplicada (R$)</span>
              <input name="laborPrice" type="number" min="0" step="0.01" placeholder="Ex.: 180.00" />
            </label>
          </fieldset>
          <fieldset class="form__fieldset">
            <legend>Serviço</legend>
            <label class="form__field">
              <span>Descrição</span>
              <input name="laborDescription" type="text" placeholder="Ex.: Troca do termostato" />
            </label>
            <label class="form__field">
              <span>Tempo estimado</span>
              <input name="laborTime" type="text" placeholder="Ex.: 2 horas" />
            </label>
            <label class="form__field">
              <span>Responsável</span>
              <input name="laborResponsible" type="text" placeholder="Ex.: Henrique A. Sloco" />
            </label>
          </fieldset>
          <button class="btn btn--primary" type="submit">Gerar PDF</button>
        </form>
      </div>
    </div>

    <script src="app.js" type="module"></script>
  </body>
</html>
